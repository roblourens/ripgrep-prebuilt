jobs:
- job: Linux_64
  pool:
    vmImage: 'ubuntu-16.04'
  steps:
    - template: linux.yml
      parameters:
        target: x86_64-unknown-linux-musl
- job: Linux_32
  pool:
    vmImage: 'ubuntu-16.04'
  steps:
    - template: linux.yml
      parameters:
        target: i686-unknown-linux-musl
- job: Linux_arm
  pool:
    vmImage: 'ubuntu-16.04'
  steps:
    - template: linux.yml
      parameters:
        target: arm-unknown-linux-gnueabihf
        gcc_version: 4.8
- job: Linux_aarch64
  pool:
    vmImage: 'ubuntu-16.04'
  steps:
    - template: linux.yml
      parameters:
        target: aarch64-unknown-linux-gnu
        gcc_version: 4.8
- job: macOS
  pool:
    vmImage: macOS 10.13
  steps:
    - template: linux.yml
      parameters:
        target: x86_64-apple-darwin
- job: Win_64
  pool:
    vmImage: VS2017-Win2016
  steps:
    - template: windows.yml
      parameters:
        target: x86_64-pc-windows-msvc
- job: Win_32
  pool:
    vmImage: VS2017-Win2016
  steps:
    - template: windows.yml
      parameters:
        target: i686-pc-windows-msvc

trigger:
  branches:
    include:
    - az-pipelines
  tags:
    include:
    - v*